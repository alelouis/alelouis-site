---
title: RC Analog filtering
---


Let's derive the equation of voltage for this circuit.
$$
\begin{aligned}
V_T &= V_R + V_C \cr
& = Ri(t)+V_C \cr
& = V_C\left(RC\frac{dV_C(t)}{dt}+1\right)\cr
\end{aligned}
$$

For analysis purposes, we apply the Laplace transform on this equation.

$$
\begin{aligned}
\mathcal{L}[V_T] &= \mathcal{L}\left[V_C\left(RC\frac{dV_C(t)}{dt}+1\right)\right]\\cr
Y(s) &= X(s)(sRC + 1) \cr
\end{aligned}
$$

From which we obtain the transfer function in Laplace domain.
$$H(s) = \frac{Y(s)}{X(s)} = \frac{1}{sRC+1}$$

This is single pole transfer function, the pole makes the denominator equal to $0$.

$$p_0 = -\frac{1}{RC}$$

Rewriting our transfer function with $p_0$:

$$H(s) =\frac{k}{s-p_0}, k=-p_0$$

We can plot the module surface of $H(s)$ in the complex Laplace domain along $\sigma$ and $\omega$, here is a contour view of it with our pole $p_0$.

<img style="margin: 0 auto; width : 75%;" src="../../images/rc-filter/h_s_plane.svg">

$p_0$ is real, which is a special type of pole because it means that the inverse Laplace transform (which one can use to find to associated time expression) is simply a real exponential.

$$
\mathcal{L}^{-1}\left[\frac{1}{sRC+1}\right]=e^{-\frac{t}{RC}}$$

From it, we can derive the time response of our circuit to a voltage step $\gamma(t)$.

$$
\begin{aligned}
Y(s)&=\mathcal{L}[\gamma(t)]\cdot H(s) \cr
&= \Gamma(s)H(s) \cr
&= \frac{1}{s}H(s) \cr
&= \frac{1}{s}\frac{k}{s-p_0}
\end{aligned}
$$

From partial fraction expansion, we know we can express this as:

$$Y(s)=\frac{a}{s}+\frac{b}{s-p_0}$$

And with a bit of equation scrambling, we find $a=1$ and $b=-1$. Finding the temporal response of our circuit to $\gamma(t)$ is now as simple as finding the inverse Laplace transform of $Y(s)$.

$$\mathcal{L}^{-1}\left[\frac{1}{s}-\frac{1}{s-p_0}\right] = 1 - e^{p_0t} = 1 - e^{-\frac{t}{RC}}$$

Familiar ? Of course !

<img style="margin: 0 auto; width : 90%;" src="../../images/rc-filter/time_response.svg">

If we remember the definition of the Laplace transform, we can plot the frequency response of this filter by estimating the transfer function on the **y-axis** of the Laplace complex domain.

So, we replace $s=j\omega$ in $H(s)$:

$$H(j\omega) = \frac{1}{j\omega RC+1}$$

And we get the response in amplitude and phase from the module and angle of $H(j\omega)$.

<img style="margin: 0 auto; width : 100%;" src="../../images/rc-filter/h_s.svg">

<img style="margin: 0 auto; width : 95%;" src="../../images/rc-filter/digital_response.svg">

## TODO
- tikzcircuit https://latex-tutorial.com/tutorials/circuitikz/
- Going to digital with bilinear
- Filtering white noise, showing fft